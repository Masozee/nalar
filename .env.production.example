# ============================================================================
# NALAR ERP - Production Environment Configuration
# ============================================================================
# Copy this file to .env.production and fill in your actual values
# DO NOT commit .env.production to git (it's in .gitignore)

# ============================================================================
# DOMAIN & SSL CONFIGURATION
# ============================================================================
DOMAIN=yourdomain.com
LETSENCRYPT_EMAIL=admin@yourdomain.com
TLS_CONFIG=tls {$EMAIL}  # Enables automatic HTTPS with Let's Encrypt

# Port configuration (use 80/443 for production, 8080/8443 for development)
HTTP_PORT=80
HTTPS_PORT=443

# ============================================================================
# DJANGO CONFIGURATION
# ============================================================================
DJANGO_SETTINGS_MODULE=config.settings.prod
SECRET_KEY=your-super-secret-key-change-this-to-random-50-chars
DEBUG=False
ALLOWED_HOSTS=yourdomain.com,api.yourdomain.com

# ============================================================================
# DATABASE (PostgreSQL)
# ============================================================================
POSTGRES_DB=nalar
POSTGRES_USER=nalar
POSTGRES_PASSWORD=your-secure-postgres-password
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Database URL for Django
DATABASE_URL=postgresql://nalar:your-secure-postgres-password@postgres:5432/nalar

# ============================================================================
# REDIS CACHE & CELERY
# ============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your-secure-redis-password
REDIS_DB=0

# Redis URL for Django
REDIS_URL=redis://:your-secure-redis-password@redis:6379/0

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================
NEXT_PUBLIC_API_URL=https://api.yourdomain.com/api/v1
NEXT_PUBLIC_FRONTEND_URL=https://yourdomain.com
NEXT_PUBLIC_WS_URL=wss://api.yourdomain.com/ws

# ============================================================================
# CORS & SECURITY
# ============================================================================
CORS_ALLOWED_ORIGINS=https://yourdomain.com
CSRF_TRUSTED_ORIGINS=https://yourdomain.com,https://api.yourdomain.com
SECURE_SSL_REDIRECT=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True

# ============================================================================
# AWS REKOGNITION (Face Recognition)
# ============================================================================
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_REGION=us-east-1
AWS_REKOGNITION_COLLECTION_ID=nalar-employees

# ============================================================================
# OBJECT STORAGE (RustFS / S3)
# ============================================================================
# RustFS Credentials
RUSTFS_ROOT_USER=minioadmin
RUSTFS_ROOT_PASSWORD=your-secure-rustfs-password
RUSTFS_DOMAIN=s3.yourdomain.com

# Django Storage Configuration
AWS_STORAGE_BUCKET_NAME=nalar-media
AWS_S3_ENDPOINT_URL=https://s3.yourdomain.com
AWS_S3_CUSTOM_DOMAIN=s3.yourdomain.com/nalar-media
AWS_S3_USE_SSL=True
AWS_S3_SIGNATURE_VERSION=s3v4

# ============================================================================
# EMAIL CONFIGURATION
# ============================================================================
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-specific-password
DEFAULT_FROM_EMAIL=Nalar ERP <noreply@yourdomain.com>
SERVER_EMAIL=server@yourdomain.com

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================
# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your-secure-grafana-password

# Prometheus
PROMETHEUS_RETENTION_TIME=30d

# ============================================================================
# PERFORMANCE & SCALING
# ============================================================================
# Gunicorn workers (formula: 2 * CPU_CORES + 1)
GUNICORN_WORKERS=5
GUNICORN_THREADS=2
GUNICORN_TIMEOUT=120

# Database connection pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=INFO
DJANGO_LOG_LEVEL=INFO
SQL_LOG_LEVEL=WARNING

# Sentry (Error Tracking - Optional)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# SENTRY_ENVIRONMENT=production
# SENTRY_TRACES_SAMPLE_RATE=0.1

# ============================================================================
# FEATURE FLAGS
# ============================================================================
ENABLE_FACE_RECOGNITION=True
ENABLE_ANALYTICS=True
ENABLE_AUDIT_LOG=True
ENABLE_WEBHOOKS=False

# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_ENABLED=True
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ============================================================================
# TIMEZONE & LOCALE
# ============================================================================
TIME_ZONE=Asia/Jakarta
LANGUAGE_CODE=en-us
USE_TZ=True

# ============================================================================
# NOTES
# ============================================================================
# 1. Generate SECRET_KEY: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
# 2. For AWS Rekognition, create IAM user with AmazonRekognitionFullAccess policy
# 3. Point your domain DNS A records to your server IP
# 4. Make sure ports 80 and 443 are open in your firewall
# 5. Caddy will automatically obtain SSL certificates from Let's Encrypt
